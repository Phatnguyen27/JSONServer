{"ast":null,"code":"var _jsxFileName = \"/home/phat/Desktop/Project/phat/src/contexts/PlaylistContext.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { server } from '../server';\nexport const PlaylistContext = React.createContext();\nexport class PlaylistProvider extends Component {\n  constructor() {\n    super();\n    this.state = {\n      playlist: []\n    };\n    this.getPlaylist = this.getPlaylist.bind(this);\n    this.addToPlaylist = this.addToPlaylist.bind(this);\n    this.clickToVote = this.clickToVote.bind(this);\n  }\n\n  componentWillMount() {\n    this.getPlaylist();\n  }\n\n  clickToVote(Id, isUpvote) {\n    // const token = localStorage.getItem('Token');\n    // if (token === null) alert('Please log in to vote ');\n    // else {\n    //     axios({\n    //         method: 'POST',\n    //         headers: { Authorization: `Bearer ${JSON.parse(localStorage.getItem('Token')).token}` },\n    //         url: 'https://lovely-hot-springs-99494.herokuapp.com/api/songs/vote',\n    //         data:\n    //         {\n    //             video_id: Id,\n    //             isUpvote: isUpvote\n    //         }\n    //     })\n    //         .then(response => {\n    //             if(response.status === 202)\n    //                 alert('You have used all your votes today, please comeback tomorrow');\n    //             else if(response.status === 200){\n    //                 alert('Successfully Voted !!!');\n    //                 this.getPlaylist();\n    //             }    \n    //         })\n    //         .catch(error => {\n    //             alert('Voted Fail !!! Please try again later');\n    //             console.log(error);\n    //         })\n    // }\n    console.log('Clicked');\n  }\n\n  addToPlaylist(videoId) {\n    axios({\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + JSON.parse(localStorage.getItem('Token')).token\n      },\n      url: server + '/songs/add',\n      data: {\n        id: videoId\n      }\n    }).then(response => {\n      console.log(response);\n      if (response.status === 200) alert('This account has already added a song, try again tomorrow!!');else {\n        alert('Successfully added');\n        this.getPlaylist();\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  getPlaylist() {\n    axios.get(server + \"/songs/playlist\").then(response => {\n      this.setState({\n        playlist: response.data\n      });\n      console.log(this.state.playlist);\n    }).catch(error => console.log(error));\n  }\n\n  render() {\n    return React.createElement(PlaylistContext.Provider, {\n      value: {\n        playlist: this.state.playlist,\n        addToPlaylist: this.addToPlaylist,\n        clickToVote: this.clickToVote\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}","map":{"version":3,"sources":["/home/phat/Desktop/Project/phat/src/contexts/PlaylistContext.js"],"names":["React","Component","axios","server","PlaylistContext","createContext","PlaylistProvider","constructor","state","playlist","getPlaylist","bind","addToPlaylist","clickToVote","componentWillMount","Id","isUpvote","console","log","videoId","method","headers","Authorization","JSON","parse","localStorage","getItem","token","url","data","id","then","response","status","alert","catch","error","get","setState","render","props","children"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,MAAT,QAAuB,WAAvB;AAEA,OAAO,MAAMC,eAAe,GAAGJ,KAAK,CAACK,aAAN,EAAxB;AAEP,OAAO,MAAMC,gBAAN,SAA+BL,SAA/B,CAAyC;AAC5CM,EAAAA,WAAW,GAAG;AACV;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAE;AADD,KAAb;AAGA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnB;AACH;;AACDG,EAAAA,kBAAkB,GAAG;AACjB,SAAKJ,WAAL;AACH;;AACDG,EAAAA,WAAW,CAACE,EAAD,EAAKC,QAAL,EAAe;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACH;;AACDN,EAAAA,aAAa,CAACO,OAAD,EAAU;AACnBjB,IAAAA,KAAK,CAAC;AACFkB,MAAAA,MAAM,EAAE,MADN;AAEFC,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAE,YAAYC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,EAA0CC;AAAvE,OAFP;AAGFC,MAAAA,GAAG,EAAEzB,MAAM,GAAG,YAHZ;AAIF0B,MAAAA,IAAI,EAAE;AACFC,QAAAA,EAAE,EAAEX;AADF;AAJJ,KAAD,CAAL,CAQKY,IARL,CAQUC,QAAQ,IAAI;AACdf,MAAAA,OAAO,CAACC,GAAR,CAAYc,QAAZ;AACA,UAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EACIC,KAAK,CAAC,6DAAD,CAAL,CADJ,KAEK;AACDA,QAAAA,KAAK,CAAC,oBAAD,CAAL;AACA,aAAKxB,WAAL;AACH;AACJ,KAhBL,EAiBKyB,KAjBL,CAiBWC,KAAK,IAAI;AAAEnB,MAAAA,OAAO,CAACC,GAAR,CAAYkB,KAAZ;AAAoB,KAjB1C;AAkBH;;AACD1B,EAAAA,WAAW,GAAG;AACVR,IAAAA,KAAK,CAACmC,GAAN,CAAUlC,MAAM,oBAAhB,EACK4B,IADL,CACUC,QAAQ,IAAI;AACd,WAAKM,QAAL,CAAc;AACV7B,QAAAA,QAAQ,EAAEuB,QAAQ,CAACH;AADT,OAAd;AAGAZ,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,KAAL,CAAWC,QAAvB;AACH,KANL,EAOK0B,KAPL,CAOWC,KAAK,IAAInB,OAAO,CAACC,GAAR,CAAYkB,KAAZ,CAPpB;AAQH;;AACDG,EAAAA,MAAM,GAAG;AACL,WACI,oBAAC,eAAD,CAAiB,QAAjB;AACI,MAAA,KAAK,EAAE;AACH9B,QAAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWC,QADlB;AAEHG,QAAAA,aAAa,EAAE,KAAKA,aAFjB;AAGHC,QAAAA,WAAW,EAAE,KAAKA;AAHf,OADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOK,KAAK2B,KAAL,CAAWC,QAPhB,CADJ;AAWH;;AApF2C","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport { server } from '../server';\n\nexport const PlaylistContext = React.createContext();\n\nexport class PlaylistProvider extends Component {\n    constructor() {\n        super();\n        this.state = {\n            playlist: []\n        }\n        this.getPlaylist = this.getPlaylist.bind(this);\n        this.addToPlaylist = this.addToPlaylist.bind(this);\n        this.clickToVote = this.clickToVote.bind(this);\n    }\n    componentWillMount() {\n        this.getPlaylist();\n    }\n    clickToVote(Id, isUpvote) {\n        // const token = localStorage.getItem('Token');\n        // if (token === null) alert('Please log in to vote ');\n        // else {\n        //     axios({\n        //         method: 'POST',\n        //         headers: { Authorization: `Bearer ${JSON.parse(localStorage.getItem('Token')).token}` },\n        //         url: 'https://lovely-hot-springs-99494.herokuapp.com/api/songs/vote',\n        //         data:\n        //         {\n        //             video_id: Id,\n        //             isUpvote: isUpvote\n        //         }\n        //     })\n        //         .then(response => {\n        //             if(response.status === 202)\n        //                 alert('You have used all your votes today, please comeback tomorrow');\n        //             else if(response.status === 200){\n        //                 alert('Successfully Voted !!!');\n        //                 this.getPlaylist();\n        //             }    \n        //         })\n        //         .catch(error => {\n        //             alert('Voted Fail !!! Please try again later');\n        //             console.log(error);\n        //         })\n        // }\n        console.log('Clicked')\n    }\n    addToPlaylist(videoId) {\n        axios({\n            method: 'POST',\n            headers: { Authorization: 'Bearer ' + JSON.parse(localStorage.getItem('Token')).token },\n            url: server + '/songs/add',\n            data: {\n                id: videoId\n            }\n        })\n            .then(response => {\n                console.log(response)\n                if (response.status === 200)\n                    alert('This account has already added a song, try again tomorrow!!');\n                else {\n                    alert('Successfully added');\n                    this.getPlaylist();\n                }\n            })\n            .catch(error => { console.log(error) })\n    }\n    getPlaylist() {\n        axios.get(server + `/songs/playlist`)\n            .then(response => {\n                this.setState({\n                    playlist: response.data\n                })\n                console.log(this.state.playlist);\n            })\n            .catch(error => console.log(error))\n    }\n    render() {\n        return (\n            <PlaylistContext.Provider\n                value={{\n                    playlist: this.state.playlist,\n                    addToPlaylist: this.addToPlaylist,\n                    clickToVote: this.clickToVote\n                }}\n            >\n                {this.props.children}\n            </PlaylistContext.Provider>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}