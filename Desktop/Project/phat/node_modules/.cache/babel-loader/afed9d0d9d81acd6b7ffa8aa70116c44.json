{"ast":null,"code":"var _jsxFileName = \"/home/phat/Desktop/Project/phat/src/contexts/PlaylistContext.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { server } from '../server';\nexport const PlaylistContext = React.createContext();\nexport class PlaylistProvider extends Component {\n  constructor() {\n    super();\n    this.state = {\n      playlist: []\n    };\n    this.getPlaylist = this.getPlaylist.bind(this);\n    this.addToPlaylist = this.addToPlaylist.bind(this);\n    this.upvoteClick = this.upvoteClick.bind(this);\n  }\n\n  componentWillMount() {\n    this.getPlaylist();\n  }\n\n  voteClick(Id, isUpvote) {\n    const storage = localStorage.getItem('Token');\n    if (storage === null) alert('Please log in to vote ');else {\n      axios({\n        method: 'POST',\n        headers: {\n          Authorization: \"Bearer \".concat(JSON.parse(localStorage.getItem('Token')).token)\n        },\n        url: 'https://lovely-hot-springs-99494.herokuapp.com/api/songs/vote',\n        data: {\n          video_id: Id,\n          isUpvote: isUpvote\n        }\n      });\n    }\n  }\n\n  addToPlaylist(videoId) {\n    axios({\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + JSON.parse(localStorage.getItem('Token')).token\n      },\n      url: server + '/songs/add',\n      data: {\n        id: videoId\n      }\n    }).then(response => {\n      console.log(response);\n      if (response.status === 200) alert('This account has already added a song, try again tomorrow!!');else {\n        alert('Successfully added');\n        this.getPlaylist();\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  getPlaylist() {\n    axios.get(server + \"/songs/playlist\").then(response => {\n      this.setState({\n        playlist: response.data\n      });\n      console.log(this.state.playlist);\n    }).catch(error => console.log(error));\n  }\n\n  render() {\n    return React.createElement(PlaylistContext.Provider, {\n      value: {\n        playlist: this.state.playlist,\n        addToPlaylist: this.addToPlaylist\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}","map":{"version":3,"sources":["/home/phat/Desktop/Project/phat/src/contexts/PlaylistContext.js"],"names":["React","Component","axios","server","PlaylistContext","createContext","PlaylistProvider","constructor","state","playlist","getPlaylist","bind","addToPlaylist","upvoteClick","componentWillMount","voteClick","Id","isUpvote","storage","localStorage","getItem","alert","method","headers","Authorization","JSON","parse","token","url","data","video_id","videoId","id","then","response","console","log","status","catch","error","get","setState","render","props","children"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport { server } from '../server';\n\nexport const PlaylistContext = React.createContext();\n\nexport class PlaylistProvider extends Component {\n    constructor() {\n        super();\n        this.state = {\n            playlist: []\n        }\n        this.getPlaylist = this.getPlaylist.bind(this);\n        this.addToPlaylist = this.addToPlaylist.bind(this);\n        this.upvoteClick = this.upvoteClick.bind(this);\n    }\n    componentWillMount() {\n        this.getPlaylist();\n    }\n    voteClick(Id, isUpvote) {\n        const storage = localStorage.getItem('Token');\n        if (storage === null) alert('Please log in to vote ');\n        else {\n            axios({\n                method: 'POST',\n                headers: { Authorization: `Bearer ${JSON.parse(localStorage.getItem('Token')).token}` },\n                url: 'https://lovely-hot-springs-99494.herokuapp.com/api/songs/vote',\n                data:\n                {\n                    video_id: Id,\n                    isUpvote: isUpvote\n                }\n            })\n        }\n\n    }\n    addToPlaylist(videoId) {\n        axios({\n            method: 'POST',\n            headers: { Authorization: 'Bearer ' + JSON.parse(localStorage.getItem('Token')).token },\n            url: server + '/songs/add',\n            data: {\n                id: videoId\n            }\n        })\n            .then(response => {\n                console.log(response)\n                if (response.status === 200)\n                    alert('This account has already added a song, try again tomorrow!!');\n                else {\n                    alert('Successfully added');\n                    this.getPlaylist();\n                }\n            })\n            .catch(error => { console.log(error) })\n    }\n    getPlaylist() {\n        axios.get(server + `/songs/playlist`)\n            .then(response => {\n                this.setState({\n                    playlist: response.data\n                })\n                console.log(this.state.playlist);\n            })\n            .catch(error => console.log(error))\n    }\n    render() {\n        return (\n            <PlaylistContext.Provider\n                value={{\n                    playlist: this.state.playlist,\n                    addToPlaylist: this.addToPlaylist\n                }}\n            >\n                {this.props.children}\n            </PlaylistContext.Provider>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}