{"ast":null,"code":"var _jsxFileName = \"/home/phat/Desktop/Project/phat/src/contexts/PlaylistContext.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { server } from '../server';\nexport const PlaylistContext = React.createContext();\nexport class PlaylistProvider extends Component {\n  constructor() {\n    super();\n    this.state = {\n      playlist: []\n    };\n    this.getPlaylist = this.getPlaylist.bind(this);\n    this.addToPlaylist = this.addToPlaylist.bind(this);\n  }\n\n  componentWillMount() {\n    this.getPlaylist();\n  }\n\n  addToPlaylist(videoId) {\n    axios({\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + JSON.parse(localStorage.getItem('Token')).token\n      },\n      url: server + '/songs/add',\n      data: {\n        id: videoId\n      }\n    }).then(response => {\n      console.log(response);\n      if (response.status === 200) alert('This account has already added a song, try again tomorrow!!');else {\n        alert('Successfully added');\n        this.getPlaylist();\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  getPlaylist() {\n    axios.get(server + \"/songs/playlist\").then(response => {\n      this.setState({\n        playlist: response.data\n      });\n    }).catch(error => console.log(error));\n  }\n\n  render() {\n    return React.createElement(PlaylistContext.Provider, {\n      value: {\n        playlist: this.state.playlist,\n        addToPlaylist: this.addToPlaylist\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}","map":{"version":3,"sources":["/home/phat/Desktop/Project/phat/src/contexts/PlaylistContext.js"],"names":["React","Component","axios","server","PlaylistContext","createContext","PlaylistProvider","constructor","state","playlist","getPlaylist","bind","addToPlaylist","componentWillMount","videoId","method","headers","Authorization","JSON","parse","localStorage","getItem","token","url","data","id","then","response","console","log","status","alert","catch","error","get","setState","render","props","children"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,MAAT,QAAuB,WAAvB;AAEA,OAAO,MAAMC,eAAe,GAAGJ,KAAK,CAACK,aAAN,EAAxB;AAEP,OAAO,MAAMC,gBAAN,SAA+BL,SAA/B,CACP;AACIM,EAAAA,WAAW,GACX;AACI;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAE;AADD,KAAb;AAGA,SAAKC,WAAL,GAAoB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAApB;AACA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAArB;AACH;;AACDE,EAAAA,kBAAkB,GAClB;AACI,SAAKH,WAAL;AACH;;AACDE,EAAAA,aAAa,CAACE,OAAD,EACb;AACIZ,IAAAA,KAAK,CAAC;AACFa,MAAAA,MAAM,EAAG,MADP;AAEFC,MAAAA,OAAO,EAAG;AAAEC,QAAAA,aAAa,EAAE,YAAYC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,EAA0CC;AAAvE,OAFR;AAGFC,MAAAA,GAAG,EAAGpB,MAAM,GAAG,YAHb;AAIFqB,MAAAA,IAAI,EAAG;AACLC,QAAAA,EAAE,EAAGX;AADA;AAJL,KAAD,CAAL,CAQGY,IARH,CAQQC,QAAQ,IAAI;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACA,UAAGA,QAAQ,CAACG,MAAT,KAAoB,GAAvB,EACIC,KAAK,CAAC,6DAAD,CAAL,CADJ,KAEI;AACAA,QAAAA,KAAK,CAAC,oBAAD,CAAL;AACA,aAAKrB,WAAL;AACH;AACA,KAhBL,EAiBGsB,KAjBH,CAiBSC,KAAK,IAAI;AAAEL,MAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ;AAAmB,KAjBvC;AAkBH;;AACDvB,EAAAA,WAAW,GACX;AACIR,IAAAA,KAAK,CAACgC,GAAN,CAAU/B,MAAM,oBAAhB,EACMuB,IADN,CACWC,QAAQ,IAAI;AACf,WAAKQ,QAAL,CAAc;AACV1B,QAAAA,QAAQ,EAAGkB,QAAQ,CAACH;AADV,OAAd;AAGF,KALN,EAMMQ,KANN,CAMYC,KAAK,IAAIL,OAAO,CAACC,GAAR,CAAYI,KAAZ,CANrB;AAOH;;AACDG,EAAAA,MAAM,GACN;AACI,WACI,oBAAC,eAAD,CAAiB,QAAjB;AACI,MAAA,KAAK,EAAI;AACL3B,QAAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWC,QADhB;AAELG,QAAAA,aAAa,EAAE,KAAKA;AAFf,OADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMK,KAAKyB,KAAL,CAAWC,QANhB,CADJ;AAUH;;AAzDL","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\n\nimport { server } from '../server';\n\nexport const PlaylistContext = React.createContext();\n\nexport class PlaylistProvider extends Component\n{\n    constructor()\n    {\n        super();\n        this.state = {\n            playlist: []\n        }\n        this.getPlaylist =  this.getPlaylist.bind(this);\n        this.addToPlaylist = this.addToPlaylist.bind(this);\n    }\n    componentWillMount()\n    {\n        this.getPlaylist();\n    }\n    addToPlaylist(videoId)\n    {\n        axios({\n            method : 'POST',\n            headers : { Authorization: 'Bearer ' + JSON.parse(localStorage.getItem('Token')).token},\n            url : server + '/songs/add',\n            data : {\n              id : videoId\n            }\n            })\n          .then(response => { \n            console.log(response)\n            if(response.status === 200)\n                alert('This account has already added a song, try again tomorrow!!');\n            else{\n                alert('Successfully added');\n                this.getPlaylist();\n            }\n            })\n          .catch(error => { console.log(error)})\n    }\n    getPlaylist()\n    {\n        axios.get(server + `/songs/playlist`)\n             .then(response => {\n                this.setState({\n                    playlist : response.data\n                })\n             })\n             .catch(error => console.log(error))\n    }\n    render()\n    {\n        return(\n            <PlaylistContext.Provider\n                value = {{\n                    playlist: this.state.playlist,\n                    addToPlaylist: this.addToPlaylist\n                }}\n            >\n                {this.props.children}\n            </PlaylistContext.Provider>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}